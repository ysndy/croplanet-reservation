<!DOCTYPE html>
<html th:replace="~{admin/layoutFile :: layout(~{::title}, ~{::section})}"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>설문 조사 추가</title>
</head>
<body>

<section>

    <h1>설문 추가</h1>

    <form id="dynamicForm" action="#" method="post" th:action th:object="${surveyDto}">

        <label for="title"> 제목 </label>
        <input type="text" id="title" th:field="*{title}">

        <div th:each="type : ${surveyTypes}" >
            <input type="radio" th:field="*{type}" th:value="${type.name()}">
            <label th:for="${#ids.prev('type')}" th:text="${type.description}">
                radio
            </label>

        </div>

        <!-- 초기 입력 필드 -->
        <p> 질문 </p>
        <input type="text" th:field="*{questions[0]}" />
        <br>

        <div id="inputContainer">
            <!-- 동적으로 추가될 입력 필드는 여기에 위치합니다. -->
        </div>

        <button type="button" onclick="addInputField()">질문 추가</button>
        <button type="submit">설문 등록</button>
    </form>

    <script th:inline="javascript">
        /* Thymeleaf에서 데이터를 JavaScript로 가져옵니다. */
        var formData = [[${SurveyDto}]];
    </script>

    <script>
        var index = 1; // 다음 입력 필드 인덱스

        function addInputField() {
            var inputContainer = document.getElementById("inputContainer");
            var input = document.createElement("input");
            input.type = "text";
            input.name = "questions[" + index + "]";
            inputContainer.appendChild(input);
            inputContainer.appendChild(document.createElement("br"));
            index++;
        }
    </script>


</section>

</body>
</html>