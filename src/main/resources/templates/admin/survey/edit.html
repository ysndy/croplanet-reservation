<!DOCTYPE html>
<html th:replace="~{admin/layoutFile :: layout(~{::title}, ~{::div})}"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>설문 조사 추가</title>
</head>
<body>

<div class="page-wrapper">

    <h1>설문 목록</h1>

    <div th:each="survey : ${surveys}">

        <h3 th:text="|${surveyStat.count}. ${survey.title}|"></h3>
        <form th:action="@{/admin/surveys/delete}" method="post">
            <input type="hidden" name="id" th:value="${survey.id}">
            <button type="submit"> X </button>
        </form>
        <p th:text="|type: ${survey.type.description}|"></p>
        <div th:if="${!#strings.equals(survey.type.description,'text')}" th:each="question : ${survey.questions}">
            <span th:text="|${questionStat.count}. ${question.question}|">질문</span>
        </div>

    </div>

    <hr>

    <h1>설문 추가</h1>

    <form id="dynamicForm" action="#" method="post" th:action th:object="${surveyDto}">

        <label for="title"> 제목 </label>
        <input type="text" id="title" th:field="*{title}">

        <div th:each="type : ${surveyTypes}" >
            <input type="radio" th:field="*{type}" th:value="${type.name()}">
            <label th:for="${#ids.prev('type')}" th:text="${type.description}">
                radio
            </label>

        </div>

        <!-- 초기 입력 필드 -->
        <p> 질문 </p>
        <input type="text" th:field="*{questions[0]}" />
        <br>

        <div id="inputContainer">
            <!-- 동적으로 추가될 입력 필드는 여기에 위치합니다. -->
        </div>

        <button type="button" onclick="addInputField()">질문 추가</button>
        <button type="submit">설문 등록</button>
    </form>

    <script>
        var index = 1; // 다음 입력 필드 인덱스

        function addInputField() {
            var inputContainer = document.getElementById("inputContainer");
            var input = document.createElement("input");
            input.type = "text";
            input.name = "questions[" + index + "]";
            inputContainer.appendChild(input);
            inputContainer.appendChild(document.createElement("br"));
            index++;
        }
    </script>


</div>

</body>
</html>